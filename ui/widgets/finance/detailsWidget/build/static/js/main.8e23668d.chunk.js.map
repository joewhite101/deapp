{"version":3,"sources":["i18n/locales/index.js","i18n/i18n.js","components/__types__/finance.js","components/finance-field-table/FinanceFieldTable.js","components/FinanceDetails.js","components/common/Notification.js","api/finance.js","components/FinanceDetailsContainer.js","api/constants.js","custom-elements/FinanceDetailsElement.js"],"names":["en","resources","Object","keys","locales","reduce","acc","lang","i18next","use","initReactI18next","init","fallbackLng","interpolation","escapeValue","PropTypes","shape","id","number","name","string","FinanceFieldTable","t","finance","i18n","language","Table","TableHead","TableRow","TableCell","TableBody","defaultProps","withTranslation","FinanceDetails","Box","widgetNamePlaceholder","statusIcon","success","CheckCircleIcon","error","ErrorIcon","info","InfoIcon","Notification","className","classes","status","message","onClose","Icon","messageTemplate","clsx","icon","iconStatus","Snackbar","open","SnackbarContent","action","IconButton","key","aria-label","color","onClick","withStyles","theme","display","alignItems","fontSize","opacity","marginRight","spacing","backgroundColor","green","palette","dark","primary","main","withTheme","FinanceDetailsContainer","props","state","loading","notificationStatus","notificationMessage","createMuiTheme","closeNotification","bind","this","onError","params","options","url","process","endsWith","defaultOptions","headers","Headers","Authorization","fetch","method","then","response","Promise","resolve","reject","Error","statusText","json","getFinance","setState","catch","e","finally","ThemeProvider","React","Component","FinanceDetailsElement","mountPoint","document","createElement","appendChild","locale","getAttribute","changeLanguage","reactComponent","customEvent","CustomEvent","details","dispatchEvent","ReactDOM","render","HTMLElement","customElements","define"],"mappings":"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","file":"static/js/main.8e23668d.chunk.js","sourcesContent":["import en from 'i18n/locales/en.json';\n\nexport default {\n  en,\n};\n","import i18next from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n\nimport locales from 'i18n/locales';\n\n// adds the default namespace ('translation') to resources object per i18next documentation\nconst resources = Object.keys(locales).reduce(\n  (acc, lang) => ({ ...acc, [lang]: { 'translation': locales[lang] } }),\n  {}\n);\n\ni18next.use(initReactI18next).init({\n  fallbackLng: 'en',\n  resources,\n  interpolation: {\n    escapeValue: false,\n  },\n});\n","import PropTypes from 'prop-types';\n\nconst financeType = PropTypes.shape({\n  id: PropTypes.number,\n  \n  name: PropTypes.string,\n});\n\nexport default financeType;\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport financeType from 'components/__types__/finance';\n\nconst FinanceFieldTable = ({ t, i18n: { language }, finance }) => {\n  const translationKeyPrefix = `entities.finance.`;\n\n  return (\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell>{t('common.name')}</TableCell>\n          <TableCell>{t('common.value')}</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        <TableRow>\n          <TableCell>\n            <span>{t(`${translationKeyPrefix}id`)}</span>\n          </TableCell>\n          <TableCell>\n            <span>{finance.id}</span>\n          </TableCell>\n        </TableRow>\n        <TableRow>\n          <TableCell>\n            <span>{t(`${translationKeyPrefix}name`)}</span>\n          </TableCell>\n          <TableCell>\n            <span>{finance.name}</span>\n          </TableCell>\n        </TableRow>\n      </TableBody>\n    </Table>\n  );\n};\n\nFinanceFieldTable.propTypes = {\n  finance: financeType,\n  t: PropTypes.func.isRequired,\n  i18n: PropTypes.shape({\n    language: PropTypes.string,\n  }).isRequired,\n};\n\nFinanceFieldTable.defaultProps = {\n  finance: [],\n};\n\nexport default withTranslation()(FinanceFieldTable);\n","import React from 'react';\nimport i18next from 'i18next';\nimport Box from '@material-ui/core/Box';\n\nimport financeType from 'components/__types__/finance';\nimport FinanceFieldTable from 'components/finance-field-table/FinanceFieldTable';\n\nconst FinanceDetails = ({ finance }) => {\n  return (\n    <Box>\n      <h3>\n        {i18next.t('common.widgetName', {\n          widgetNamePlaceholder: 'Finance',\n        })}\n      </h3>\n      <FinanceFieldTable finance={finance} />\n    </Box>\n  );\n};\n\nFinanceDetails.propTypes = {\n  finance: financeType,\n};\n\nFinanceDetails.defaultProps = {\n  finance: {},\n};\n\nexport default FinanceDetails;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { Snackbar, SnackbarContent } from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport InfoIcon from '@material-ui/icons/Info';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport { green } from '@material-ui/core/colors';\n\nconst styles = theme => ({\n  message: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  icon: {\n    fontSize: 20,\n  },\n  iconStatus: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1),\n  },\n  success: {\n    backgroundColor: green[600],\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark,\n  },\n  info: {\n    backgroundColor: theme.palette.primary.main,\n  },\n});\n\nconst statusIcon = {\n  success: CheckCircleIcon,\n  error: ErrorIcon,\n  info: InfoIcon,\n};\n\nconst Notification = ({ className, classes, status, message, onClose }) => {\n  if (!message) return '';\n\n  const Icon = statusIcon[status];\n  const messageTemplate = (\n    <span className={classes.message}>\n      <Icon className={clsx(classes.icon, classes.iconStatus)} />\n      {message}\n    </span>\n  );\n\n  return (\n    <Snackbar open onClose={onClose}>\n      <SnackbarContent\n        className={clsx(classes[status], className)}\n        message={messageTemplate}\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\n            <CloseIcon className={classes.icon} />\n          </IconButton>,\n        ]}\n      />\n    </Snackbar>\n  );\n};\n\nNotification.propTypes = {\n  classes: PropTypes.shape({\n    message: PropTypes.string.isRequired,\n    icon: PropTypes.string.isRequired,\n    iconStatus: PropTypes.string.isRequired,\n    error: PropTypes.string.isRequired,\n  }).isRequired,\n  className: PropTypes.string,\n  status: PropTypes.oneOf(['success', 'error', 'info']),\n  message: PropTypes.string,\n  onClose: PropTypes.func,\n};\n\nNotification.defaultProps = {\n  message: null,\n  className: '',\n  status: 'info',\n  onClose: () => {},\n};\n\nexport default withStyles(styles, { withTheme: true })(Notification);\n","import { DOMAIN, JWT_TOKEN } from 'api/constants';\n\nexport default (params = {}) => {\n  const { id, options } = params;\n\n  const url = `${DOMAIN}${DOMAIN.endsWith('/') ? '' : '/'}finances/${id}`;\n  const defaultOptions = {\n    headers: new Headers({\n      Authorization: `Bearer ${JWT_TOKEN}`,\n      'Content-Type': 'application/json',\n    }),\n  };\n\n  return fetch(url, {\n    method: 'GET',\n    ...defaultOptions,\n    ...options,\n  })\n    .then(response =>\n      response.status >= 200 && response.status < 300\n        ? Promise.resolve(response)\n        : Promise.reject(new Error(response.statusText || response.status))\n    )\n    .then(response => response.json());\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18next from 'i18next';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core';\n\nimport FinanceDetails from 'components/FinanceDetails';\nimport Notification from 'components/common/Notification';\nimport getFinance from 'api/finance';\n\nclass FinanceDetailsContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      finance: {},\n      notificationStatus: null,\n      notificationMessage: null,\n    };\n\n    this.theme = createMuiTheme();\n    this.closeNotification = this.closeNotification.bind(this);\n  }\n\n  componentDidMount() {\n    const { id, onError } = this.props;\n\n    if (id) {\n      getFinance({ id })\n        .then(response => this.setState({\n          notificationStatus: null,\n          notificationMessage: null,\n          finance: response\n        }))\n        .catch(e => {\n          onError(e);\n          this.setState({\n            notificationStatus: 'error',\n            notificationMessage: i18next.t('common.couldNotFetchData'),\n          });\n        })\n        .finally(() => this.setState({ loading: false }));\n    } else {\n      this.setState({\n        loading: false,\n        notificationStatus: 'error',\n        notificationMessage: i18next.t('common.missingId'),\n      });\n    }\n  }\n\n  closeNotification() {\n    this.setState({ error: null });\n  }\n\n  render() {\n    const { finance, notificationStatus, notificationMessage, loading } = this.state;\n\n    return (\n      <ThemeProvider theme={this.theme}>\n        {loading && i18next.t('common.loading')}\n        {!loading && <FinanceDetails finance={finance} />}\n        <Notification\n          status={notificationStatus}\n          message={notificationMessage}\n          onClose={this.closeNotification}\n        />\n      </ThemeProvider>\n    );\n  }\n}\n\nFinanceDetailsContainer.propTypes = {\n  id: PropTypes.string.isRequired,\n  onError: PropTypes.func,\n};\n\nFinanceDetailsContainer.defaultProps = {\n  onError: () => {},\n};\n\nexport default FinanceDetailsContainer;\n","export const DOMAIN = process.env.REACT_APP_DOMAIN;\nexport const JWT_TOKEN = process.env.REACT_APP_JWT_TOKEN;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport i18next from 'i18next';\nimport FinanceDetailsContainer from 'components/FinanceDetailsContainer';\n\nclass FinanceDetailsElement extends HTMLElement {\n  connectedCallback() {\n    const mountPoint = document.createElement('div');\n    this.appendChild(mountPoint);\n\n    const locale = this.getAttribute('locale') || 'en';\n    i18next.changeLanguage(locale);\n\n    const customEventPrefix = 'finance.details.';\n\n    const onError = error => {\n      const customEvent = new CustomEvent(`${customEventPrefix}error`, {\n        details: {\n          error,\n        },\n      });\n      this.dispatchEvent(customEvent);\n    };\n\n    const id = this.getAttribute('id');\n\n    const reactComponent = React.createElement(FinanceDetailsContainer, {\n      id,\n      onError,\n    });\n    ReactDOM.render(reactComponent, mountPoint);\n  }\n}\n\ncustomElements.define('finance-details', FinanceDetailsElement);\n"],"sourceRoot":""}