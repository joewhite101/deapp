{"version":3,"sources":["i18n/locales/index.js","i18n/i18n.js","components/FinanceTable.js","components/__types__/finance.js","api/finances.js","api/constants.js","components/common/Notification.js","components/FinanceTableContainer.js","custom-elements/FinanceTableElement.js"],"names":["en","it","resources","Object","keys","locales","reduce","acc","lang","i18next","use","initReactI18next","init","fallbackLng","interpolation","escapeValue","FinanceTable","PropTypes","arrayOf","shape","id","number","name","string","classes","finances","onSelect","tableRows","map","finance","TableRow","hover","className","root","key","onClick","TableCell","length","Table","TableHead","t","TableBody","defaultProps","withStyles","cursor","a","url","process","headers","Authorization","fetch","response","json","statusIcon","success","CheckCircleIcon","error","ErrorIcon","info","InfoIcon","Notification","status","message","onClose","Icon","messageTemplate","clsx","icon","iconStatus","Snackbar","open","SnackbarContent","action","IconButton","aria-label","color","theme","display","alignItems","fontSize","opacity","marginRight","spacing","backgroundColor","green","palette","dark","primary","main","withTheme","FinanceTableContainer","createMuiTheme","state","notificationStatus","notificationMessage","closeNotification","setState","financesGet","this","handleError","err","onError","props","ThemeProvider","PureComponent","FinanceTableElement","mountPoint","document","createElement","appendChild","locale","getAttribute","changeLanguage","reactRoot","React","customEvent","CustomEvent","detail","dispatchEvent","item","ReactDOM","render","HTMLElement","customElements","define"],"mappings":"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","file":"static/js/main.12428062.chunk.js","sourcesContent":["import en from 'i18n/locales/en.json';\nimport it from 'i18n/locales/it.json';\n\nexport default {\n    en,\n    it,\n};\n","import i18next from 'i18next';\nimport { initReactI18next } from 'react-i18next';\n\nimport locales from 'i18n/locales';\n\n// adds the default namespace ('translation') to resources object per i18next documentation\nconst resources = Object.keys(locales).reduce(\n  (acc, lang) => ({ ...acc, [lang]: { 'translation': locales[lang] } }),\n  {}\n);\n\ni18next.use(initReactI18next).init({\n  fallbackLng: 'en',\n  resources,\n  interpolation: {\n    escapeValue: false,\n  },\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18next from 'i18next';\nimport { withStyles } from '@material-ui/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport financeType from 'components/__types__/finance';\n\nconst styles = {\n    root: {\n        cursor: 'pointer',\n    },\n};\n\nconst FinanceTable = ({ classes, finances, onSelect }) => {\n    const tableRows = finances.map(finance => (\n        <TableRow\n            hover\n            className={classes.root}\n            key={finance.id}\n            onClick={() => onSelect(finance)}\n        >\n            <TableCell><span>{finance.name}</span></TableCell>\n        </TableRow>\n    ));\n\n    return (finances.length ? (\n        <Table>\n            <TableHead>\n                <TableRow>\n                    <TableCell>\n                        <span>{ i18next.t('entities.finance.name') }</span>\n                    </TableCell>\n                </TableRow>\n            </TableHead>\n            <TableBody>\n                { tableRows }\n            </TableBody>\n        </Table>\n    ) : (\n        i18next.t(\"entities.finance.noItems\")\n    ));\n};\n\nFinanceTable.propTypes = {\n    classes: PropTypes.shape({\n        root: PropTypes.string,\n    }),\n    finances: financeType,\n    onSelect: PropTypes.func,\n};\n\nFinanceTable.defaultProps = {\n    classes: {\n        root: '',\n    },\n    onSelect: () => {},\n};\n\nexport default withStyles(styles)(FinanceTable);\n","import PropTypes from 'prop-types';\n\nconst financeType = PropTypes.arrayOf(\n  PropTypes.shape({\n    id: PropTypes.number,\n\n    name: PropTypes.string,\n  }),\n);\n\nexport default financeType;\n","import { DOMAIN, JWT_TOKEN } from 'api/constants';\n\nexport default async () => {\n    const url = `${DOMAIN}/finances`;\n    const init = {\n        headers: {\n            Authorization: `Bearer ${JWT_TOKEN}`,\n        },\n    };\n    const response = await fetch(url, init);\n\n    return response.json();\n};\n","export const DOMAIN = process.env.REACT_APP_DOMAIN;\nexport const JWT_TOKEN = process.env.REACT_APP_JWT_TOKEN;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { Snackbar, SnackbarContent } from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport InfoIcon from '@material-ui/icons/Info';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport { green } from '@material-ui/core/colors';\n\nconst styles = theme => ({\n  message: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  icon: {\n    fontSize: 20,\n  },\n  iconStatus: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1),\n  },\n  success: {\n    backgroundColor: green[600],\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark,\n  },\n  info: {\n    backgroundColor: theme.palette.primary.main,\n  },\n});\n\nconst statusIcon = {\n  success: CheckCircleIcon,\n  error: ErrorIcon,\n  info: InfoIcon,\n};\n\nconst Notification = ({ className, classes, status, message, onClose }) => {\n  if (!message) return '';\n\n  const Icon = statusIcon[status];\n  const messageTemplate = (\n    <span className={classes.message}>\n      <Icon className={clsx(classes.icon, classes.iconStatus)} />\n      {message}\n    </span>\n  );\n\n  return (\n    <Snackbar open onClose={onClose}>\n      <SnackbarContent\n        className={clsx(classes[status], className)}\n        message={messageTemplate}\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\n            <CloseIcon className={classes.icon} />\n          </IconButton>,\n        ]}\n      />\n    </Snackbar>\n  );\n};\n\nNotification.propTypes = {\n  classes: PropTypes.shape({\n    message: PropTypes.string.isRequired,\n    icon: PropTypes.string.isRequired,\n    iconStatus: PropTypes.string.isRequired,\n    error: PropTypes.string.isRequired,\n  }).isRequired,\n  className: PropTypes.string,\n  status: PropTypes.oneOf(['success', 'error', 'info']),\n  message: PropTypes.string,\n  onClose: PropTypes.func,\n};\n\nNotification.defaultProps = {\n  message: null,\n  className: '',\n  status: 'info',\n  onClose: () => {},\n};\n\nexport default withStyles(styles, { withTheme: true })(Notification);\n","import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport i18next from 'i18next';\nimport FinanceTable from 'components/FinanceTable';\nimport financesGet from 'api/finances';\nimport Notification from 'components/common/Notification';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core';\n\nexport default class FinanceTableContainer extends PureComponent {\n  theme = createMuiTheme();\n\n  state = {\n      finances: [],\n      notificationStatus: null,\n      notificationMessage: null,\n  };\n\n  async componentDidMount() {\n    try {\n      const json = await financesGet();\n\n      const finances = json.map(finance => ({\n        ...finance,\n      }));\n      this.setState({\n        finances,\n        notificationStatus: null,\n        notificationMessage: null,\n      });\n    } catch (err) {\n      this.handleError(err);\n    }\n  }\n\n  closeNotification = () => {\n    this.setState({error: null});\n  };\n\n  handleError(err) {\n    const {onError} = this.props;\n    onError(err);\n    this.setState({\n      notificationStatus: 'error',\n      notificationMessage: i18next.t('common.couldNotFetchData'),\n    });\n  }\n\n  render() {\n    const {notificationStatus, notificationMessage, finances} = this.state;\n    const {onSelect} = this.props;\n    return (\n      <ThemeProvider theme={this.theme}>\n        <FinanceTable finances={finances} onSelect={onSelect}/>\n        <Notification\n          status={notificationStatus}\n          message={notificationMessage}\n          onClose={this.closeNotification}\n        />\n      </ThemeProvider>\n    );\n  }\n}\n\nFinanceTableContainer.propTypes = {\n  onError: PropTypes.func,\n  onSelect: PropTypes.func,\n};\n\nFinanceTableContainer.defaultProps = {\n  onError: () => {\n  },\n  onSelect: () => {\n  },\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport i18next from 'i18next';\nimport FinanceTableContainer from 'components/FinanceTableContainer';\n\nclass FinanceTableElement extends HTMLElement\n{\n  connectedCallback()\n  {\n    const mountPoint = document.createElement('div');\n    this.appendChild(mountPoint);\n\n    const locale = this.getAttribute('locale') || 'en';\n    i18next.changeLanguage(locale);\n\n    const customEventPrefix = 'Finance.table.';\n\n    const onError = error => {\n      const customEvent = new CustomEvent(`${customEventPrefix}error`, {\n        detail: {\n          error,\n        },\n      });\n      this.dispatchEvent(customEvent);\n    };\n\n    const onSelect = item => {\n      const customEvent = new CustomEvent(`${customEventPrefix}select`, {\n        detail: {\n          item,\n        },\n      });\n      this.dispatchEvent(customEvent);\n    };\n\n    const reactRoot = React.createElement(FinanceTableContainer, {onError, onSelect}, null);\n    ReactDOM.render(reactRoot, mountPoint);\n  }\n}\n\ncustomElements.define('finance-table', FinanceTableElement);\n"],"sourceRoot":""}